---
import BaseLayout from '../layouts/BaseLayout.astro';
import SearchBar from '../components/SearchBar.astro';
import GuestCard from '../components/GuestCard.astro';
import { getStats, getRecentGuests } from '../lib/data';

const stats = getStats();
const recentGuests = getRecentGuests(3);
---
<BaseLayout title="Closet Picks">
  <h1>Closet Picks</h1>
  <p>
    A searchable database of every pick from the Criterion Collection's
    <a href="https://www.youtube.com/playlist?list=PLkLimRXN6NKxQNkePsdMFMRaKFGJMuSaW" target="_blank" rel="noopener noreferrer">Closet Picks</a>
    YouTube series &mdash; with verbatim quotes, timestamped video links, and connections between guests and films.
  </p>

  <div class="stats-bar">
    <div class="stat">
      <span class="stat-number">{stats.totalGuests}</span>
      <span class="stat-label">guests</span>
    </div>
    <div class="stat">
      <span class="stat-number">{stats.totalFilms}</span>
      <span class="stat-label">films</span>
    </div>
    <div class="stat">
      <span class="stat-number">{stats.totalPicks}</span>
      <span class="stat-label">picks</span>
    </div>
  </div>

  <SearchBar />

  <h2>Recent Guests</h2>
  <div class="grid" style="grid-template-columns: repeat(3, 1fr);">
    {recentGuests.map((guest) => (
      <GuestCard
        name={guest.name}
        slug={guest.slug}
        profession={guest.profession}
        photoUrl={guest.photo_url}
        pickCount={guest.pick_count}
      />
    ))}
  </div>

  <div class="quick-links">
    <a href="/random/" class="quick-link">Random Pick</a>
  </div>
</BaseLayout>
